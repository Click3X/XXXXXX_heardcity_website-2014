!function(){var a;a=jQuery,a.fn.flexNav=function(b){var c,d,e,f,g,h,i,j,k,l,m,n;return k=a.extend({animationSpeed:250,transitionOpacity:!0,buttonSelector:".menu-button",hoverIntent:!1,hoverIntentTimeout:150,calcItemWidths:!1,hover:!0},b),c=a(this),c.addClass("with-js"),k.transitionOpacity===!0&&c.addClass("opacity"),c.find("li").each(function(){return a(this).has("ul").length?a(this).addClass("item-with-ul").find("ul").hide():void 0}),k.calcItemWidths===!0&&(d=c.find(">li"),f=d.length,h=100/f,g=h+"%"),c.data("breakpoint")&&(e=c.data("breakpoint")),l=function(){return c.hasClass("lg-screen")===!0&&k.hover===!0?k.transitionOpacity===!0?a(this).find(">ul").addClass("flexnav-show").stop(!0,!0).animate({height:["toggle","swing"],opacity:"toggle"},k.animationSpeed):a(this).find(">ul").addClass("flexnav-show").stop(!0,!0).animate({height:["toggle","swing"]},k.animationSpeed):void 0},i=function(){return c.hasClass("lg-screen")===!0&&a(this).find(">ul").hasClass("flexnav-show")===!0&&k.hover===!0?k.transitionOpacity===!0?a(this).find(">ul").removeClass("flexnav-show").stop(!0,!0).animate({height:["toggle","swing"],opacity:"toggle"},k.animationSpeed):a(this).find(">ul").removeClass("flexnav-show").stop(!0,!0).animate({height:["toggle","swing"]},k.animationSpeed):void 0},j=function(){var b;if(a(window).width()<=e)return c.removeClass("lg-screen").addClass("sm-screen"),k.calcItemWidths===!0&&d.css("width","100%"),b=k.buttonSelector+", "+k.buttonSelector+" .touch-button",a(b).removeClass("active"),a(".one-page li a").on("click",function(){return c.removeClass("flexnav-show")});if(a(window).width()>e){if(c.removeClass("sm-screen").addClass("lg-screen"),k.calcItemWidths===!0&&d.css("width",g),c.removeClass("flexnav-show").find(".item-with-ul").on(),a(".item-with-ul").find("ul").removeClass("flexnav-show"),i(),k.hoverIntent===!0)return a(".item-with-ul").hoverIntent({over:l,out:i,timeout:k.hoverIntentTimeout});if(k.hoverIntent===!1)return a(".item-with-ul").on("mouseenter",l).on("mouseleave",i)}},a(k.buttonSelector).data("navEl",c),n=".item-with-ul, "+k.buttonSelector,a(n).append('<span class="touch-button"><i class="navicon">&#9660;</i></span>'),m=k.buttonSelector+", "+k.buttonSelector+" .touch-button",a(m).on("click",function(b){var c,d,e;return a(m).toggleClass("active"),b.preventDefault(),b.stopPropagation(),e=k.buttonSelector,c=a(this).is(e)?a(this):a(this).parent(e),d=c.data("navEl"),d.toggleClass("flexnav-show")}),a(".touch-button").on("click",function(){var b,d;return b=a(this).parent(".item-with-ul").find(">ul"),d=a(this).parent(".item-with-ul").find(">span.touch-button"),c.hasClass("lg-screen")===!0&&a(this).parent(".item-with-ul").siblings().find("ul.flexnav-show").removeClass("flexnav-show").hide(),b.hasClass("flexnav-show")===!0?(b.removeClass("flexnav-show").slideUp(k.animationSpeed),d.removeClass("active")):b.hasClass("flexnav-show")===!1?(b.addClass("flexnav-show").slideDown(k.animationSpeed),d.addClass("active")):void 0}),c.find(".item-with-ul *").focus(function(){return a(this).parent(".item-with-ul").parent().find(".open").not(this).removeClass("open").hide(),a(this).parent(".item-with-ul").find(">ul").addClass("open").show()}),j(),a(window).on("resize",j)}}.call(this);var $event=$.event,$special,resizeTimeout;$special=$event.special.debouncedresize={setup:function(){$(this).on("resize",$special.handler)},teardown:function(){$(this).off("resize",$special.handler)},handler:function(a,b){var c=this,d=arguments,e=function(){a.type="debouncedresize",$event.dispatch.apply(c,d)};resizeTimeout&&clearTimeout(resizeTimeout),b?e():resizeTimeout=setTimeout(e,$special.threshold)},threshold:250};var BLANK="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==";$.fn.imagesLoaded=function(a){function b(){var b=$(i),c=$(j);e&&(j.length?e.reject(g,b,c):e.resolve(g)),$.isFunction(a)&&a.call(d,g,b,c)}function c(a,c){a.src!==BLANK&&-1===$.inArray(a,h)&&(h.push(a),c?j.push(a):i.push(a),$.data(a,"imagesLoaded",{isBroken:c,src:a.src}),f&&e.notifyWith($(a),[c,g,$(i),$(j)]),g.length===h.length&&(setTimeout(b),g.unbind(".imagesLoaded")))}var d=this,e=$.isFunction($.Deferred)?$.Deferred():0,f=$.isFunction(e.notify),g=d.find("img").add(d.filter("img")),h=[],i=[],j=[];return $.isPlainObject(a)&&$.each(a,function(b,c){"callback"===b?a=c:e&&e[b](c)}),g.length?g.bind("load.imagesLoaded error.imagesLoaded",function(a){c(a.target,"error"===a.type)}).each(function(a,b){var d=b.src,e=$.data(b,"imagesLoaded");return e&&e.src===d?void c(b,e.isBroken):b.complete&&void 0!==b.naturalWidth?void c(b,0===b.naturalWidth||0===b.naturalHeight):void((b.readyState||b.complete)&&(b.src=BLANK,b.src=d))}):b(),e?e.promise(d):d};var Grid=function(){function a(a){v=$.extend(!0,{},v,a),k.imagesLoaded(function(){c(!0),f(),d()})}function b(a){l=l.add(a),a.each(function(){var a=$(this);a.data({offsetTop:a.offset().top,height:a.height()})}),e(a)}function c(a){l.each(function(){var b=$(this);b.data("offsetTop",b.offset().top),a&&b.data("height",b.height())})}function d(){e(l),q.on("debouncedresize",function(){o=0,n=-1,c(),f();var a=$.data(this,"preview");"undefined"!=typeof a&&h()})}function e(a){a.on("click","span.og-close",function(){return h(),!1}).children("a").on("click",function(){var a=$(this).parent();return m===a.index()?h():g(a),!1})}function f(){j={width:q.width(),height:q.height()}}function g(a){var b=$.data(this,"preview"),c=a.data("offsetTop");if(o=0,"undefined"!=typeof b){if(n===c)return b.update(a),!1;c>n&&(o=b.height),h()}n=c,b=$.data(this,"preview",new i(a)),b.open()}function h(){m=-1;var a=$.data(this,"preview");a.close(),$.removeData(this,"preview")}function i(a){this.$item=a,this.expandedIdx=this.$item.index(),this.create(),this.update()}var j,k=$("#og-grid"),l=k.children("li"),m=-1,n=-1,o=0,p=0,q=$(window),r=$("html, body"),s={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd",msTransition:"MSTransitionEnd",transition:"transitionend"},t=s[Modernizr.prefixed("transition")],u=Modernizr.csstransitions,v={minHeight:350,speed:350,easing:"ease"};return i.prototype={create:function(){this.$title=$('<li class="p-name"></li>'),this.$videoTagFile=$('<source src="" type="video/mp4" />'),this.$videoTag=$('<video controls class="feat-video" poster=""></video>'),this.$videoTag.append(this.$videoTagFile),this.$vidOgg=$('<source src="" type="video/ogg" />'),this.$videoTag.append(this.$vidOgg),this.$director=$('<span class="p-director"></span>'),this.$directorList=$('<li class="p-director"><span class="bold">Directed by: </span></li>').append(this.$director),this.$mixer=$('<span class="p-mixer"></span>'),this.$mixerList=$('<li><span class="bold">Mixed by: </span><span class="p-mixer"></span></li>').append(this.$mixer),this.$agency=$('<span class="p-agency"></span>'),this.$agencyList=$('<li class="p-agency"><span class="bold">Agency: </span></li>').append(this.$agency),this.$client=$('<span class="p-client"></span>'),this.$clientList=$('<li class="p-client"><span class="bold">Client: </span></li>').append(this.$client),this.$projectInfo=$('<ul class="credits"></ul>').append(this.$title,this.$clientList,this.$agencyList,this.$directorList),this.$sectionTitle=$('<div class="section-title grey-theme"><div class="noise"></div></div>').append(this.$projectInfo),this.$details=$('<div class="og-details"></div>'),this.$fullimage=$('<div class="og-fullimg"></div>').append(this.$videoTag,this.$sectionTitle),this.$closePreview=$('<span class="og-close"></span>'),this.$previewInner=$('<div class="og-expander-inner"></div>').append(this.$closePreview,this.$fullimage,this.$details),this.$previewEl=$('<div class="og-expander"></div>').append(this.$previewInner),this.$item.append(this.getEl()),u&&this.setTransition()},update:function(a){if(a&&(this.$item=a),-1!==m){var b=l.eq(m);b.removeClass("og-expanded"),this.$item.addClass("og-expanded"),this.positionPreview()}m=this.$item.index();var c=this.$item.children("a"),d={href:c.attr("href"),title:c.data("title"),mp4:c.data("mp4"),director:c.data("director"),mixer:c.data("mixer"),poster:c.data("poster"),agency:c.data("agency"),client:c.data("client")};this.$title.html(d.title);var e=d.mp4;e=e.replace("mp4","ogv"),this.$vidOgg.attr("src",e),this.$videoTagFile.attr("src",d.mp4),this.$videoTag.attr("poster",d.poster),this.$director.html(d.director),this.$mixer.html(d.mixer),this.$agency.html(d.agency),this.$client.html(d.client)},open:function(){setTimeout($.proxy(function(){this.setHeights(),this.positionPreview()},this),25)},close:function(){var a=this,b=function(){u&&$(this).off(t),a.$item.removeClass("og-expanded"),a.$previewEl.remove()};return setTimeout($.proxy(function(){"undefined"!=typeof this.$largeImg&&this.$largeImg.fadeOut("fast"),this.$previewEl.css("height",0);var a=l.eq(this.expandedIdx);a.css("height",a.data("height")).on(t,b),u||b.call()},this),25),!1},calcHeight:function(){var a=j.height-this.$item.data("height")-p,b=j.height;a<v.minHeight&&(a=v.minHeight,b=v.minHeight+this.$item.data("height")+p),this.height=a,this.itemHeight=b},setHeights:function(){var a=this,b=function(){u&&a.$item.off(t),a.$item.addClass("og-expanded")};this.calcHeight(),this.$previewEl.css("height",this.height+190),this.$item.css("height",this.itemHeight).on(t,b),u||b.call()},positionPreview:function(){var a=this.$item.data("offsetTop"),b=this.$previewEl.offset().top-o,c=this.height+this.$item.data("height")+p<=j.height?a:this.height<j.height?b-(j.height-this.height):b;r.animate({scrollTop:c},v.speed)},setTransition:function(){this.$previewEl.css("transition","height "+v.speed+"ms "+v.easing),this.$item.css("transition","height "+v.speed+"ms "+v.easing)},getEl:function(){return this.$previewEl}},{init:a,addItems:b}}(),featuresBtn=$("#features-btn"),features=$(".feature"),commercials=$(".commercial"),allBtn=$("#all-btn"),all=$(".feature, .commercial"),commercialsBtn=$("#commercials-btn");featuresBtn.click(function(){features.show().removeClass("project-hidden"),commercials.addClass("project-hidden").hide(),$(".selected-button").removeClass("selected-button");var a=$(this).parent().parent();a.addClass("selected-button")}),commercialsBtn.click(function(){commercials.show().removeClass("project-hidden"),features.addClass("project-hidden").hide(),$(".selected-button").removeClass("selected-button");var a=$(this).parent().parent();a.addClass("selected-button")}),allBtn.click(function(){all.show().removeClass("project-hidden"),$(".selected-button").removeClass("selected-button");var a=$(this).parent().parent(),a=$(this).parent().parent();a.addClass("selected-button"),$(".features-commercial .button-holder").addClass("selected-button")}),$(function(){device=/Android|webOS|iPhone|iPad|iPod|BlackBerry/i.test(navigator.userAgent)?"mobile":"desk";var a=$("body"),b=$("#page-fixed");a.addClass(device),$("#page-title").text("Projects"),$("#page-projects").addClass("mobile-hidden current"),b.flexNav({hoverIntent:!1,hover:!1,buttonSelector:"#page-button"}),$("#og-grid a").click(function(a){window.location.hash=$(this).attr("id"),a.preventDefault()}),$(function(){Grid.init(),selectedProject&&setTimeout(function(){{var a="#"+selectedProject;$(a).parent()}$(a).click()},100)})});